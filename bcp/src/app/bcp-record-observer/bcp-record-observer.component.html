
<!-- Gun Details row-->
<div class="row" [formGroup]="gunForm">
    <div class="col-md-6">
        <mat-card>
            <mat-card-title>Basic Information</mat-card-title>
            <mat-card-content>
                <table  class="table table-striped">
                    <tbody>
                    <tr>
                        <td >Type of Gun</td>
                        <td colspan="3"> 
                            <div class="border border-light">
                                <mat-select  formControlName="category" name="category">
                                    <mat-option 
                                        *ngFor="let category of DATA_VALUES.GUN_CATEGORIES" 
                                        [value]="category"
                                    >
                                        {{category}}
                                    </mat-option>
                                </mat-select>  
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>Material</td>
                        <td colspan="3"> 
                            <div class="border border-light">
                                <mat-select formControlName="material" name="material">
                                    <mat-option 
                                        *ngFor="let material of DATA_VALUES.MATERIAL"
                                        [value]="material"
                                    >
                                        {{material}}
                                    </mat-option>
                                </mat-select>  
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td >Short Desc</td>
                        <td colspan="3">
                            <textarea   class="w-100" 
                                        rows="2" 
                                        name="description"
                                        placeholder="Description"
                                        formControlName="description"
                                >
                            </textarea> 
                        </td>
                    </tr>
                    <tr>
                        <td >Author</td>
                        <td><input  class="form-control"
                                    type="text" 
                                    name="name" 
                                    value="{{user.login?gun.owner : '******' }}" 
                                    placeholder="Owner" 
                                    readonly 
                                    style="max-width:10em;"
                            >
                        </td>
                        <td>Date <span class="d-none d-md-inline">Recorded</span></td>
                        <td class="">{{gun.date | date :'dd/MM/yy' }}</td>
                    </tr>
                    </tbody>
                </table>
                <table *ngIf="user.login" class="table table-striped">
                    <tbody>
                    <tr>
                        <div class="row">
                            <div class="col-sm-6">
                                <mat-slide-toggle
                                    formControlName="markings"
                                    name="markings"
                                    matTooltip="Are there any Markings on the Gun?"
                                >
                                    Markings?
                                </mat-slide-toggle>
                            </div>
                            <div class="col-sm-6">
                                <mat-slide-toggle
                                    formControlName="interpretation"
                                    name="interpretations"
                                    matTooltip="Is there an Interprative Information associated with the Gun?"
                                >
                                    Information board?
                                </mat-slide-toggle>
                            </div>
                        </div>
                    </tr>
                    </tbody>
                </table>
                <table class="table table-striped" *ngIf="user.login">
                    <tbody>
                        <tr *ngIf="gunForm.value.markings">
                            <td>
                                Describe the Markings
                            </td>
                            <td>
                                <textarea
                                    class="w-100"
                                    name="mark_details"
                                    rows='2'
                                    placeholder="Details"
                                    formControlName="mark_details"
                                ></textarea>
                            </td>
                        </tr>
                        <tr  *ngIf="gunForm.value.interpretation">
                            <td>
                                What does the board say?
                            </td>
                            <td>
                                <textarea
                                    class="w-100"
                                    rows='2'
                                    name="inter_details"
                                    placeholder="Details"
                                    formControlName="inter_details"
                                ></textarea>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </mat-card-content>
        </mat-card>
    </div>
    

    <div class="col-md-6">
        <!-- Site Details-->
    <mat-card >
        <mat-card-title-group>
          <mat-card-title>Site</mat-card-title>
          <mat-card-subtitle>{{site.display_name}}</mat-card-subtitle>
          <img mat-card-sm-image
            *ngIf="site && site.geocode.icon"
            [src]="site.geocode.icon"
        >
        </mat-card-title-group>
        <mat-card-content>
            <mat-chip-list aria-label="Gun Count" class=" card-body align-middle">
                <mat-chip *ngIf="site" 
                          color="primary" 
                          selected
                          matTooltip="There {{site.guns.length>1?'are':'is'}} {{site.guns.length}} record{{site.guns.length>1?'s':''}} at this Site"
                    >{{site.guns.length}} Gun{{site.guns.length>1?"s":""}}
                </mat-chip>
            </mat-chip-list>
        </mat-card-content>
        <mat-card-actions align="end">
            <button mat-raised-button color="primary"
                    *ngIf="user.login"
                    [routerLink]="['/database/site']" 
                    [queryParams]="{site_id:site.id}"
                    matTooltip="Goto the Details Page for this Site"
                >Goto Site
            </button>
            <a mat-raised-button color="primary" 
               *ngIf="site.type=='google' && user.login" 
               [href]="site.geocode.url" 
               target="_blank"
               matTooltip="Goto the Google page for this site"
              >Google Page
            </a>
            <a mat-raised-button color="primary" 
               *ngIf="site.geocode.website && user.login" 
               [href]="site.geocode.website" 
               target="_blank"
               matTooltip="Goto the website for this site"
              >Website
            </a>
            <button mat-raised-button
                    *ngIf="user.login"
                    color="primary" 
                >Change
            </button>
          </mat-card-actions>
      </mat-card>
        <mat-card>
            <mat-card-content>
                <table  class="table table-striped">
                    <tbody>
                        <tr>
                            <td>Description of Cannon Location</td>
                            <td>
                                <textarea 
                                    class="w-100"
                                    rows='2' 
                                    name="context"
                                    placeholder="Describe context"
                                    formControlName="context"
                                ></textarea>
                            </td>
                        </tr>
                        <tr min-height="50px" *ngIf="user.login">
                            <td colspan='2'>
                                <div class="row">
                                    <div class="col-2">
                                        <mat-slide-toggle
                                            formControlName="collection"
                                            name="collection"
                                        ></mat-slide-toggle>
                                    </div>
                                    <div class="col-10">
                                        <small class="text-wrap">
                                            Is this gun part of a  museum, gallery or collection or on the grounds of a heritage site like a castle or recognised archeological site?
                                        </small>
                                    </div> 
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <table class="table table-striped" *ngIf="user.login && gunForm.value.collection">
                    <tbody>
                        <tr >
                            <td>Name of Museum / Gallery / Heritage Site / Collection</td>
                            <td>
                                <textarea 
                                    class="w-100"
                                    rows='1'
                                    name="coll_name"
                                    placeholder="Collection name"
                                    formControlName="coll_name"
                                ></textarea>
                            </td>
                        </tr>
                        <tr >
                            <td>Collection Ref</td>
                            <td>
                                <input
                                    class="w-100"
                                    type="text"
                                    name="coll_ref"
                                    placeholder="Collection reference"
                                    formControlName="coll_ref"
                                >
                            </td>
                        </tr>
                    </tbody>
                </table>
            </mat-card-content>
        </mat-card>
    </div>
</div>
<!-- second row-->
<div *ngIf="user.login" class="row bg-light pt-3">
    <!-- Map Pane-->
    <div class="col-md-6">
        <mat-card>
            <mat-card-title>Location</mat-card-title>
            <mat-card-content>
                <app-bcp-gmap
                    [options]="options"
                    [location]="gun.location"
                    [viewport]="viewport"
                    [gun]="gun"
                    (newLocation$)="locationUpdate($event)"
                >
                </app-bcp-gmap>
            </mat-card-content>
        </mat-card>

    </div>
    <!-- Photo  Pane-->
    <div class="col-md-6">
       <mat-card>
        <mat-card-title>Photos</mat-card-title>
        <mat-card-content>
            <app-bcp-photos 
                [images]="images"
                (newImage$)="acceptPhoto($event)"
            ></app-bcp-photos>
        </mat-card-content>
       </mat-card>
    </div>
</div>
